(function(e){function t(t){for(var a,i,c=t[0],s=t[1],d=t[2],u=0,v=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&v.push(n[i][0]),n[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);l&&l(t);while(v.length)v.shift()();return o.push.apply(o,d||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,c=1;c<r.length;c++){var s=r[c];0!==n[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},o=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/hello-world/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"0b7d":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"scanner"}},[e._v(" 掃描內容:"+e._s(""==e.contentString?"無":e.contentString)+" "),e._m(0),r("video",{ref:"video",staticClass:"video-view",attrs:{autoplay:"",playsinline:"true","webkit-playsinline":"true"}}),r("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{width:"478",height:"850"}})])},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"model"},[r("div",{staticClass:"scanner-view"},[r("div",{staticClass:"scanner-view-arrow arrow1"}),r("div",{staticClass:"scanner-view-arrow arrow2"}),r("div",{staticClass:"scanner-view-arrow arrow3"}),r("div",{staticClass:"scanner-view-arrow arrow4"}),r("div",{staticClass:"scanner-line"})])])}],s=(r("b0c0"),r("ecec")),d=r.n(s),l=r("8a00"),u=r.n(l),v={name:"",data:function(){return{cameraWidth:0,cameraHeight:0,contentString:""}},methods:{initVideo:function(e){var t=this;navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(t.videoSuccess).catch(t.videoError):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e).then(t.videoSuccess).catch(t.videoError):navigator.mozGetUserMedia?navigator.mozGetUserMedia(e).then(t.videoSuccess).catch(t.videoError):navigator.getUserMedia&&navigator.getUserMedia(e).then(t.videoSuccess).catch(t.videoError)},videoSuccess:function(e){var t=this.$refs.video,r=this;t.srcObject=e,t.play(),t.oncanplay=function(){console.log("攝像頭分辨率"),console.log(t.videoWidth,t.videoHeight),r.cameraWidth=t.videoWidth,r.cameraHeight=t.videoHeight,r.readImg()}},videoError:function(e){console.log("訪問用戶媒體設備失敗：",e.name,e.message),alert("訪問用戶媒體設備失敗：",e.name,e.message)},readImg:function(){var e=this.$refs.video,t=this.$refs.canvas,r=t.getContext("2d"),a=this,n=setInterval((function(){var o=t.toDataURL();a.readBarcode(o,n),r.drawImage(e,0,0,a.cameraWidth,a.cameraHeight,0,0,478,850);var i=r.getImageData(0,0,478,850);a.readQrcode(i.data,n)}),1e3)},readBarcode:function(e,t){var r=this;u.a.decodeSingle({inputStream:{size:1920},locator:{patchSize:"medium",halfSample:!1},decoder:{readers:["code_128_reader","ean_reader","ean_8_reader","code_39_reader","code_39_vin_reader","codabar_reader","upc_reader","upc_e_reader","i2of5_reader","2of5_reader","code_93_reader"]},locate:!0,src:e},(function(e){e&&e.codeResult?(console.log(e.codeResult),clearInterval(t),r.$emit("ondata",e.codeResult.code),alert("掃描成功，結果是..."+e.codeResult.code),r.contentString=e.codeResult.code):console.log("正在掃條碼...not detected")}))},readQrcode:function(e,t){var r=this,a=d()(e,478,850,{inversionAttempts:"dontInvert"});a?(clearInterval(t),r.$emit("ondata",a.data),alert("掃二維碼成功，結果是..."+a.data),r.contentString=a.data):console.log("正在掃二維碼...")}},mounted:function(){navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia?this.initVideo({video:{height:800,facingMode:{exact:"environment"}}}):alert("您的瀏覽器不支持訪問用戶媒體設備")}},f=v,p=(r("9d80"),r("2877")),g=Object(p["a"])(f,i,c,!1,null,"4eab270c",null),h=g.exports,m={name:"App",components:{HelloWorld:h}},_=m,w=(r("034f"),Object(p["a"])(_,n,o,!1,null,null,null)),b=w.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(b)}}).$mount("#app")},"85ec":function(e,t,r){},"9d80":function(e,t,r){"use strict";r("0b7d")}});
//# sourceMappingURL=app.c7010a99.js.map